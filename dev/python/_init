#!/usr/bin/env zsh
source ${0:A:h}/../../deploy
source env.zsh

install() {
  brew install pyenv

  pyenv install $PYTHON_VERSION
  pyenv global $PYTHON_VERSION

  pip3 install --user --upgrade pip setuptools pipenv

  # Other packages
  pip3 install --user --upgrade black pylint autoflake gnureadline grip cpplint
}

update() {
  python3 -m pip install --user --upgrade pip setuptools pipenv

  # Other packages
  pip3 install --user --upgrade pylint autoflake gnureadline grip cpplint
}

link() {
  mklink config/flake8 $XDG_CONFIG_HOME/
  mklink config/pudb/pudb.cfg $XDG_CONFIG_HOME/pudb/
  mklink .* ~/
}

clean() {
  rm -fv $XDG_CONFIG_HOME/flake8 $XDG_CONFIG_HOME/pudb
  rm -rf $PYENV_ROOT
}

init "$@"
